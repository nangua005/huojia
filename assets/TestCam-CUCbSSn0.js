import{_ as p,r as u,o as g,b as w,d as c,e as i,t as f,F as _,p as y,l as v}from"./index-0PAfSg3y.js";const B={__name:"TestCam",setup(h){const s=u(null),r=u("等待扫码..."),o=u([]);let a=null,n=null;return g(async()=>{await ZXingBrowser.BrowserQRCodeReader.wasmBindingsReady;const t=(await navigator.mediaDevices.enumerateDevices()).find(e=>e.kind==="videoinput");if(!t){r.value="❌ 没有找到摄像头";return}n=await navigator.mediaDevices.getUserMedia({video:{deviceId:t.deviceId,facingMode:"environment",width:{ideal:1920},height:{ideal:1080}}}),s.value.srcObject=n,a=new ZXingBrowser.BrowserMultiFormatReader,a.decodeFromVideoElementContinuously(s.value,(e,m)=>{if(e){const d=e.getText();o.value.includes(d)||(o.value.push(d),r.value="✅ 扫码成功："+d)}})}),w(()=>{a&&a.reset(),n&&n.getTracks().forEach(l=>l.stop())}),(l,t)=>(v(),c("div",null,[t[0]||(t[0]=i("h2",null,"高识别率扫码1（ZXing WASM + Vue3）",-1)),i("video",{ref_key:"videoRef",ref:s,autoplay:"",muted:"",playsinline:"",style:{width:"100%","max-width":"480px"}},null,512),i("div",null,f(r.value),1),i("ul",null,[(v(!0),c(_,null,y(o.value,(e,m)=>(v(),c("li",{key:m},f(e),1))),128))])]))}},k=p(B,[["__scopeId","data-v-577b406d"]]);export{k as default};
